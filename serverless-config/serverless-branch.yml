#This file is autogenerated. Please change the template in /serverless-config/ dir.
service: alcala

plugins:
  - serverless-plugin-typescript
  - serverless-domain-manager

provider:
  name: aws
  runtime: nodejs8.10
  region: eu-west-3
  stage: ${opt:stage}
  environment:
    BACKEND_RPC: ${ssm:/alcala/BACKEND_RPC~true}
  vpc:
    securityGroupIds:
      - Fn::GetAtt: [VPCStaticIP, DefaultSecurityGroup]
    subnetIds:
      - Ref: SubnetPrivate
  iamRoleStatements:
    - Effect: Allow
      Action:
        - ec2:CreateNetworkInterface
        - ec2:DeleteNetworkInterface
        - ec2:DescribeNetworkInterfaces
      Resource: '*'

custom: 
  customDomain:
    domainName: alcala.uport.space
    basePath: ${opt:stage}
    createRoute53Record: false
  
functions:
  - ${file(serverless-config/functions.yml)}

resources:
  - ${file(serverless-config/resources.yml)}

